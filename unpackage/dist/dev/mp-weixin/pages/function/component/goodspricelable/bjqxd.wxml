<view class="box data-v-fdbdd72e" style="{{(skin)}}"><view class="status-bar data-v-fdbdd72e"></view><view class="nav-bar data-v-fdbdd72e"><view class="left data-v-fdbdd72e"><navigator hidden="{{!(ifpage)}}" open-type="navigateBack" class="data-v-fdbdd72e"><uni-icons vue-id="b9fc0c86-1" type="back" size="30" color="#fff" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></navigator><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" hidden="{{!(!ifpage)}}" class="navleftview data-v-fdbdd72e" bindtap="__e"><uni-icons vue-id="b9fc0c86-2" type="back" size="30" color="#fff" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></view></view><view class="center data-v-fdbdd72e">标价签新单</view><view class="right data-v-fdbdd72e"><block wx:if="{{ifpage}}"><uni-icons vue-id="b9fc0c86-3" type="plusempty" size="30" color="#fff" data-event-opts="{{[['^tap',[['scxd']]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></block><block wx:else><uni-icons vue-id="b9fc0c86-4" type="cloud-upload" size="30" color="#fff" data-event-opts="{{[['^tap',[['upload']]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></block></view></view><view hidden="{{!(ifpage)}}" class="box-content data-v-fdbdd72e"><view class="my-collapse data-v-fdbdd72e"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="my-collapse-title data-v-fdbdd72e" bindtap="__e"><view class="fold-title data-v-fdbdd72e"><view class="fold-title-t fold-title-flex data-v-fdbdd72e"><text class="data-v-fdbdd72e">{{"单号:"+danhao}}</text><text data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="dhliang data-v-fdbdd72e" catchtap="__e">{{"明细:"+dhNum}}</text></view><view class="fold-title-flex fold-title-con data-v-fdbdd72e"><block wx:if="{{notUpData.length==0}}"><view class="data-v-fdbdd72e">{{newtime}}</view></block><block wx:else><view class="data-v-fdbdd72e">{{notUpData[0].labelgoods_date}}</view></block><block wx:if="{{notUpData.length==0}}"><text class="cu1 data-v-fdbdd72e">0个</text></block><block wx:else><text class="cu1 data-v-fdbdd72e">{{notUpData[0].total_num+"个"}}</text></block></view></view></view><view hidden="{{!(myCollShow)}}" class="my-collapse-con data-v-fdbdd72e"><u-form class="form-card data-v-fdbdd72e vue-ref" vue-id="b9fc0c86-5" labelPosition="left" model="{{uFormModel}}" rules="{{uFormRules}}" data-ref="uForm" bind:__l="__l" vue-slots="{{['default']}}"><u-form-item vue-id="{{('b9fc0c86-6')+','+('b9fc0c86-5')}}" label="价签类型" labelWidth="{{74}}" prop="labelLx" data-event-opts="{{[['^tap',[['searchLabelLx']]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('b9fc0c86-7')+','+('b9fc0c86-6')}}" inputAlign="{{inputAlign}}" disabled="{{true}}" disabledColor="#fff" placeholder="请选择标价签类型" border="none" value="{{uFormModel.labelLx}}" data-event-opts="{{[['^input',[['__set_model',['$0','labelLx','$event',[]],['uFormModel']]]]]}}" class="data-v-fdbdd72e" bind:__l="__l"></u-input><block wx:if="{{labelLxClearShow&&!isVoiceMode}}"><uni-icons vue-id="{{('b9fc0c86-8')+','+('b9fc0c86-6')}}" type="clear" size="19" color="#C3C3C3" data-event-opts="{{[['^tap',[['clearAlone',['labelLx']]]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></block><block wx:if="{{!labelLxClearShow&&!isVoiceMode}}"><text class="inp-right-text data-v-fdbdd72e"></text></block><block wx:if="{{isVoiceMode&&state=='add'}}"><uni-icons vue-id="{{('b9fc0c86-9')+','+('b9fc0c86-6')}}" custom-prefix="iconfont" type="icon-yuyin" color="{{doingId=='labelLx'?'#358CC9':'#7A7A7A'}}" size="19" data-event-opts="{{[['^tap',[['clickYuyin',['labelLx',false]]]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></block></u-form-item><u-form-item vue-id="{{('b9fc0c86-10')+','+('b9fc0c86-5')}}" label="分店名称" labelWidth="{{74}}" prop="fendian" data-event-opts="{{[['^tap',[['disabledFd']]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l" vue-slots="{{['default']}}"><u-input vue-id="{{('b9fc0c86-11')+','+('b9fc0c86-10')}}" inputAlign="{{inputAlign}}" placeholder="请输入分店编号/名称" disabled="{{state=='edit'||state=='pladd'||isVoiceMode}}" border="none" focus="{{focusObj.fdFocus}}" value="{{uFormModel.fendian}}" data-event-opts="{{[['^change',[['fendianChange']]],['^input',[['__set_model',['$0','fendian','$event',[]],['uFormModel']]]]]}}" bind:change="__e" bind:input="__e" class="data-v-fdbdd72e" bind:__l="__l"></u-input><block wx:if="{{fendianClearShow&&!isVoiceMode}}"><uni-icons vue-id="{{('b9fc0c86-12')+','+('b9fc0c86-10')}}" type="clear" size="19" color="#C3C3C3" data-event-opts="{{[['^tap',[['clearAlone',['fendian']]]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></block><block wx:if="{{!fendianClearShow&&!isVoiceMode}}"><text class="inp-right-text data-v-fdbdd72e"></text></block><block wx:if="{{isVoiceMode&&state=='add'}}"><uni-icons vue-id="{{('b9fc0c86-13')+','+('b9fc0c86-10')}}" custom-prefix="iconfont" type="icon-yuyin" color="{{doingId=='fendian'?'#358CC9':'#7A7A7A'}}" size="19" data-event-opts="{{[['^tap',[['clickYuyin',['fendian',true]]]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></block></u-form-item></u-form></view></view><u-form class="form-card data-v-fdbdd72e vue-ref" vue-id="b9fc0c86-14" labelPosition="left" model="{{uFormModel}}" rules="{{uFormRules}}" data-ref="uForm" bind:__l="__l" vue-slots="{{['default']}}"><u-form-item class="shoping data-v-fdbdd72e" vue-id="{{('b9fc0c86-15')+','+('b9fc0c86-14')}}" label="商品名称" labelWidth="{{74}}" prop="shoping" bind:__l="__l" vue-slots="{{['default']}}"><u-input vue-id="{{('b9fc0c86-16')+','+('b9fc0c86-15')}}" inputAlign="right" placeholder="请输入商品编码/名称/简码" disabled="{{isVoiceMode}}" border="none" focus="{{focusObj.shopingFocus}}" value="{{uFormModel.shoping}}" data-event-opts="{{[['^change',[['shopingChange']]],['^input',[['__set_model',['$0','shoping','$event',[]],['uFormModel']]]]]}}" bind:change="__e" bind:input="__e" class="data-v-fdbdd72e" bind:__l="__l"></u-input><block wx:if="{{shopingClearShow&&!isVoiceMode}}"><uni-icons vue-id="{{('b9fc0c86-17')+','+('b9fc0c86-15')}}" type="clear" size="19" color="#C3C3C3" data-event-opts="{{[['^tap',[['clearAlone',['shoping']]]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></block><block wx:if="{{isVoiceMode}}"><uni-icons vue-id="{{('b9fc0c86-18')+','+('b9fc0c86-15')}}" custom-prefix="iconfont" type="icon-yuyin" color="{{doingId=='shoping'?'#358CC9':'#7A7A7A'}}" size="19" data-event-opts="{{[['^tap',[['clickYuyin',['shoping',true]]]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></block><block wx:if="{{!isVoiceMode&&!ispda}}"><uni-icons vue-id="{{('b9fc0c86-19')+','+('b9fc0c86-15')}}" custom-prefix="iconfont" type="icon-shouye" size="20" color="#606060" data-event-opts="{{[['^tap',[['scan']]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></block></u-form-item><view class="shopTishi data-v-fdbdd72e"><block wx:if="{{uFormModel.bm}}"><view class="data-v-fdbdd72e"><text class="left-con data-v-fdbdd72e">编码:</text><text class="data-v-fdbdd72e">{{uFormModel.bm}}</text></view></block><block wx:if="{{uFormModel.sm}}"><view class="data-v-fdbdd72e"><text class="left-con data-v-fdbdd72e">条码:</text><text class="data-v-fdbdd72e">{{uFormModel.sm}}</text></view></block></view><u-form-item vue-id="{{('b9fc0c86-20')+','+('b9fc0c86-14')}}" label="标签数量" labelWidth="{{74}}" prop="num" class="data-v-fdbdd72e" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('b9fc0c86-21')+','+('b9fc0c86-20')}}" inputAlign="right" placeholder="请输入标签数量" type="number" border="none" focus="{{focusObj.numFocus}}" value="{{uFormModel.num}}" data-event-opts="{{[['^input',[['__set_model',['$0','num','$event',[]],['uFormModel']]]]]}}" class="data-v-fdbdd72e" bind:__l="__l"></u-input><block wx:if="{{isVoiceMode}}"><uni-icons vue-id="{{('b9fc0c86-22')+','+('b9fc0c86-20')}}" custom-prefix="iconfont" type="icon-yuyin" color="{{doingId=='num'?'#358CC9':'#7A7A7A'}}" size="19" data-event-opts="{{[['^tap',[['clickYuyin',['num',true]]]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></block><block wx:else><text class="inp-right-text data-v-fdbdd72e"></text></block></u-form-item></u-form><u-button class="my-primary-button data-v-fdbdd72e" vue-id="b9fc0c86-23" type="primary" text="保存商品" throttleTime="1000" data-event-opts="{{[['^tap',[['save']]]]}}" bind:tap="__e" bind:__l="__l"></u-button></view><view hidden="{{!(!ifpage)}}" class="box-content local-page data-v-fdbdd72e"><block wx:for="{{notUpData}}" wx:for-item="v" wx:for-index="i"><uni-collapse class="fold data-v-fdbdd72e vue-ref-in-for" vue-id="{{'b9fc0c86-24-'+i}}" data-ref="collapseView" bind:__l="__l" vue-slots="{{['default']}}"><uni-collapse-item vue-id="{{('b9fc0c86-25-'+i)+','+('b9fc0c86-24-'+i)}}" open="{{true}}" show-arrow="{{false}}" title-border="none" class="data-v-fdbdd72e" bind:__l="__l" vue-slots="{{['default','title']}}"><view class="fold-title data-v-fdbdd72e" slot="title"><view class="fold-title-t fold-title-flex data-v-fdbdd72e"><text class="data-v-fdbdd72e">{{v.pricelalist_id}}</text><text class="dhliang data-v-fdbdd72e">{{v.child.length}}</text></view><view class="fold-title-flex fold-title-con data-v-fdbdd72e"><text class="data-v-fdbdd72e">{{v.labelgoods_date}}</text></view><view class="fold-title-flex fold-title-con data-v-fdbdd72e"><text class="data-v-fdbdd72e">{{v.label_name}}</text><text class="cu1 cu-price data-v-fdbdd72e">{{v.total_num+"个"}}</text></view><view class="fold-title-flex fold-title-con data-v-fdbdd72e"><text class="data-v-fdbdd72e">{{v.labelshop_name}}</text></view></view><block wx:for="{{v.child}}" wx:for-item="item" wx:for-index="index"><view class="fold-content data-v-fdbdd72e"><view class="multiple-border data-v-fdbdd72e"><view class="card-flex-wrap data-v-fdbdd72e"><view class="card-row data-v-fdbdd72e">{{item.labelgoods_name}}</view><view class="data-v-fdbdd72e"><block wx:if="{{localState!='editdetail'||editIndex!=index}}"><uni-icons vue-id="{{('b9fc0c86-26-'+i+'-'+index)+','+('b9fc0c86-25-'+i)}}" type="compose" size="20" color="#3183C1" data-event-opts="{{[['^tap',[['toeditDetail',['$0',index],[[['notUpData','',i],['child','',index]]]]]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></block><block wx:if="{{localState!='editdetail'||editIndex!=index}}"><uni-icons style="margin-left:10px;" vue-id="{{('b9fc0c86-27-'+i+'-'+index)+','+('b9fc0c86-25-'+i)}}" type="trash" size="20" color="#F13B44" data-event-opts="{{[['^tap',[['notUpDel',['$0','$1'],[[['notUpData','',i]],[['notUpData','',i],['child','',index]]]]]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></block></view></view><view class="multiples data-v-fdbdd72e"><view class="multiple-con data-v-fdbdd72e"><text class="left-con data-v-fdbdd72e">编码:</text><text class="right-con data-v-fdbdd72e">{{item.labelgoods_bm}}</text></view><view class="multiple-con data-v-fdbdd72e"><text class="left-con data-v-fdbdd72e">条码:</text><text class="right-con data-v-fdbdd72e">{{item.labelgoods_sm}}</text></view></view><view class="multiples data-v-fdbdd72e"><view class="multiple-con data-v-fdbdd72e"><text class="left-con data-v-fdbdd72e">数量:</text><u-input bind:input="__e" data-custom-hidden="{{!(localState=='editdetail'&&editIndex==index)}}" vue-id="{{('b9fc0c86-28-'+i+'-'+index)+','+('b9fc0c86-25-'+i)}}" type="number" formatter="{{editFormat}}" value="{{item.labelgoods_num}}" data-event-opts="{{[['^input',[['__set_model',['$0','labelgoods_num','$event',[]],[[['notUpData','',i],['child','',index]]]]]]]}}" class="data-v-fdbdd72e" bind:__l="__l"></u-input><text hidden="{{!(localState!='editdetail'||editIndex!=index)}}" class="right-con data-v-fdbdd72e">{{item.labelgoods_num}}</text></view></view></view><view hidden="{{!(localState=='editdetail'&&editIndex==index)}}" class="btns data-v-fdbdd72e"><u-button vue-id="{{('b9fc0c86-29-'+i+'-'+index)+','+('b9fc0c86-25-'+i)}}" type="primary" plain="{{true}}" text="取消" throttleTime="1000" data-event-opts="{{[['^tap',[['e3']]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l"></u-button><u-button vue-id="{{('b9fc0c86-30-'+i+'-'+index)+','+('b9fc0c86-25-'+i)}}" type="primary" text="保存" throttleTime="1000" data-event-opts="{{[['^tap',[['editDetailSave',['$0','$1'],[[['notUpData','',i]],[['notUpData','',i],['child','',index]]]]]]]}}" bind:tap="__e" class="data-v-fdbdd72e" bind:__l="__l"></u-button></view></view></block></uni-collapse-item></uni-collapse></block></view><u-toast vue-id="b9fc0c86-31" data-ref="uToast" class="data-v-fdbdd72e vue-ref" bind:__l="__l"></u-toast><u-popup class="u-popup-center data-v-fdbdd72e" vue-id="b9fc0c86-32" show="{{popupShow}}" mode="center" zIndex="5000" bind:__l="__l" vue-slots="{{['default']}}"><scroll-view style="max-height:60vh;" scroll-y="true" class="data-v-fdbdd72e"><block wx:if="{{ifDrawer=='labelLx'}}"><view class="data-v-fdbdd72e"><block wx:for="{{list}}" wx:for-item="v" wx:for-index="i"><view data-event-opts="{{[['tap',[['radioChange0',[v.id+'-'+v.name,false]]]]]}}" class="list data-v-fdbdd72e" bindtap="__e"><text class="data-v-fdbdd72e">{{v.id}}</text>-<text class="data-v-fdbdd72e">{{v.name}}</text></view></block></view></block><block wx:else><block wx:if="{{ifDrawer=='fendian'}}"><view class="data-v-fdbdd72e"><block wx:for="{{list}}" wx:for-item="v" wx:for-index="i"><view data-event-opts="{{[['tap',[['radioChange1',[v.fdbh+'-'+v.fdmc,false]]]]]}}" class="list data-v-fdbdd72e" bindtap="__e"><text class="data-v-fdbdd72e"><rich-text nodes="{{v.fdbh}}"></rich-text></text>-<text class="data-v-fdbdd72e"><rich-text nodes="{{v.fdmc}}"></rich-text></text></view></block></view></block><block wx:else><block wx:if="{{ifDrawer=='shoping'}}"><view class="shop data-v-fdbdd72e"><block wx:for="{{list}}" wx:for-item="v" wx:for-index="i"><view data-event-opts="{{[['tap',[['shopingFunc',['$0',false],[[['list','',i]]]]]]]}}" class="list data-v-fdbdd72e" bindtap="__e"><view class="shop-l data-v-fdbdd72e">{{i+1}}</view><view class="shop-r data-v-fdbdd72e"><view class="shop-r-t data-v-fdbdd72e"><text class="t-name data-v-fdbdd72e">{{v.spmc}}</text><text class="t-price data-v-fdbdd72e">{{"库存:"+v.dqkcl}}</text></view><view class="shop-r-b data-v-fdbdd72e"><view class="data-v-fdbdd72e"><text class="b-xi data-v-fdbdd72e">编码:</text><text class="b-cu data-v-fdbdd72e">{{v.spbm}}</text></view><view class="data-v-fdbdd72e"><text class="b-xi data-v-fdbdd72e">条码:</text><text class="b-cu data-v-fdbdd72e">{{v.spsmm}}</text></view></view></view></view></block></view></block></block></block></scroll-view><view data-event-opts="{{[['tap',[['e4',['$event']]]]]}}" class="closebtn data-v-fdbdd72e" bindtap="__e">取消</view></u-popup><movable-area class="movable-area data-v-fdbdd72e"><movable-view hidden="{{!(!isVoiceMode)}}" class="movable-view data-v-fdbdd72e" x="{{x}}" y="{{y}}" direction="all" animation="{{false}}" out-of-bounds="{{true}}"><view data-event-opts="{{[['tap',[['changeSwitch',['$event']]]]]}}" class="iconimgs data-v-fdbdd72e" bindtap="__e"><view class="iconView data-v-fdbdd72e"><uni-icons vue-id="b9fc0c86-33" custom-prefix="iconfont" type="icon-yuyin" color="#fff" size="30" class="data-v-fdbdd72e" bind:__l="__l"></uni-icons></view></view></movable-view><movable-view hidden="{{!(isVoiceMode)}}" class="movable-view movable-view-large data-v-fdbdd72e" x="{{x}}" y="{{y}}" direction="all" animation="{{false}}" out-of-bounds="{{true}}"><goods-voice vue-id="b9fc0c86-34" step="{{yuyinModelArr}}" list="{{list}}" searchCode="{{searchCode}}" data-ref="goodsVoice" data-event-opts="{{[['^updateList',[['__set_sync',['$0','list','$event'],['']]]],['^changeParentValue',[['changeParentValue']]],['^changeVoiceShow',[['changeVoiceShow']]],['^doing',[['doing']]]]}}" bind:updateList="__e" bind:changeParentValue="__e" bind:changeVoiceShow="__e" bind:doing="__e" class="data-v-fdbdd72e vue-ref" bind:__l="__l"></goods-voice></movable-view></movable-area></view>