<view class="box data-v-866840f6" style="{{(skin)}}"><view class="status-bar data-v-866840f6"></view><view class="nav-bar data-v-866840f6"><view class="left data-v-866840f6"><navigator hidden="{{!(ifpage)}}" open-type="navigateBack" class="data-v-866840f6"><uni-icons vue-id="469edbbe-1" type="back" size="30" color="#fff" class="data-v-866840f6" bind:__l="__l"></uni-icons></navigator><view data-event-opts="{{[['tap',[['toback',['$event']]]]]}}" hidden="{{!(!ifpage)}}" class="navleftview data-v-866840f6" bindtap="__e"><uni-icons vue-id="469edbbe-2" type="back" size="30" color="#fff" class="data-v-866840f6" bind:__l="__l"></uni-icons></view></view><view hidden="{{!(ifpage)}}" class="center data-v-866840f6">促销新单</view><view hidden="{{!(!ifpage)}}" class="center data-v-866840f6">商品明细</view><view hidden="{{!(ifpage)}}" class="right data-v-866840f6"><u-button class="icon-button data-v-866840f6" vue-id="469edbbe-3" text throttleTime="2000" disabled="{{state=='add'}}" data-event-opts="{{[['^tap',[['newOrder']]]]}}" bind:tap="__e" bind:__l="__l" vue-slots="{{['default']}}"><uni-icons vue-id="{{('469edbbe-4')+','+('469edbbe-3')}}" type="plusempty" size="30" color="#fff" class="data-v-866840f6" bind:__l="__l"></uni-icons></u-button></view></view><view hidden="{{!(ifpage)}}" class="box-content data-v-866840f6"><view class="my-collapse data-v-866840f6"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="my-collapse-title data-v-866840f6" bindtap="__e"><view class="fold-title data-v-866840f6"><view class="fold-title-t fold-title-flex data-v-866840f6"><text class="data-v-866840f6">{{"单号:"+uFormTitle.djbh}}</text><text data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="dhliang data-v-866840f6" catchtap="__e">{{"明细:"+tableData.length}}</text></view><view style="display:flex;justify-content:center;align-items:center;padding:8px;" class="data-v-866840f6"><block wx:if="{{myCollShow}}"><text class="data-v-866840f6">收起</text></block><block wx:else><text class="data-v-866840f6">展开</text></block><block wx:if="{{myCollShow}}"><uni-icons vue-id="469edbbe-5" type="top" size="19" color="#fff" class="data-v-866840f6" bind:__l="__l"></uni-icons></block><block wx:else><uni-icons vue-id="469edbbe-6" type="bottom" size="19" color="#fff" class="data-v-866840f6" bind:__l="__l"></uni-icons></block></view></view></view><view hidden="{{!(myCollShow)}}" class="my-collapse-con data-v-866840f6"><block wx:if="{{neworderShow}}"><view style="text-align:center;color:#F56C6C;" class="data-v-866840f6">这是一个新单！！！</view></block><u-form class="form-card data-v-866840f6" vue-id="469edbbe-7" labelPosition="left" model="{{uFormTitle}}" bind:__l="__l" vue-slots="{{['default']}}"><u-form-item vue-id="{{('469edbbe-8')+','+('469edbbe-7')}}" label="促销方式" labelWidth="{{76}}" prop="cxlx" class="data-v-866840f6" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('469edbbe-9')+','+('469edbbe-8')}}" placeholder="请输入单据编号" disabled="{{true}}" value="{{uFormTitle.cxlx}}" data-event-opts="{{[['^input',[['__set_model',['$0','cxlx','$event',[]],['uFormTitle']]]]]}}" class="data-v-866840f6" bind:__l="__l"></u-input></u-form-item><u-form-item vue-id="{{('469edbbe-10')+','+('469edbbe-7')}}" label="选择分店" labelWidth="{{76}}" prop="remarks" class="data-v-866840f6" bind:__l="__l" vue-slots="{{['default']}}"><rudon-multi-selector vue-id="{{('469edbbe-11')+','+('469edbbe-10')}}" welcome="请选择分店" is_using_slot="{{false}}" is_using_icon="{{true}}" localdata="{{data2}}" data-event-opts="{{[['^change',[['whenChanged']]]]}}" bind:change="__e" class="data-v-866840f6" bind:__l="__l"></rudon-multi-selector></u-form-item><u-form-item data-custom-hidden="{{!(doingindex>=4)}}" vue-id="{{('469edbbe-12')+','+('469edbbe-7')}}" label="开始时间" labelWidth="{{74}}" prop="kssj" class="data-v-866840f6" bind:__l="__l" vue-slots="{{['default']}}"><uni-datetime-picker vue-id="{{('469edbbe-13')+','+('469edbbe-12')}}" type="datetime" value="{{uFormModel.start}}" data-event-opts="{{[['^change',[['startdate']]],['^input',[['__set_model',['$0','start','$event',[]],['uFormModel']]]]]}}" bind:change="__e" bind:input="__e" class="data-v-866840f6" bind:__l="__l"></uni-datetime-picker></u-form-item><u-form-item data-custom-hidden="{{!(doingindex>=4)}}" vue-id="{{('469edbbe-14')+','+('469edbbe-7')}}" label="结束时间" labelWidth="{{74}}" prop="jssj" class="data-v-866840f6" bind:__l="__l" vue-slots="{{['default']}}"><uni-datetime-picker vue-id="{{('469edbbe-15')+','+('469edbbe-14')}}" type="datetime" value="{{uFormModel.end}}" data-event-opts="{{[['^change',[['enddate']]],['^input',[['__set_model',['$0','end','$event',[]],['uFormModel']]]]]}}" bind:change="__e" bind:input="__e" class="data-v-866840f6" bind:__l="__l"></uni-datetime-picker></u-form-item><u-form-item vue-id="{{('469edbbe-16')+','+('469edbbe-7')}}" label="商家编号" labelWidth="{{76}}" prop="sjbh" data-event-opts="{{[['^tap',[['querySj',[false,'','sjbh']]]]]}}" bind:tap="__e" class="data-v-866840f6" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('469edbbe-17')+','+('469edbbe-16')}}" placeholder="请选择商家编号" disabled="{{true}}" disabledColor="{{state=='pladd'||state=='edit'||state=='look'||state=='check'?'#F5F7FA':'#fff'}}" value="{{uFormTitle.sjbh}}" data-event-opts="{{[['^input',[['__set_model',['$0','sjbh','$event',[]],['uFormTitle']]]]]}}" class="data-v-866840f6" bind:__l="__l"></u-input></u-form-item><u-form-item vue-id="{{('469edbbe-18')+','+('469edbbe-7')}}" label="报损仓库" labelWidth="{{76}}" prop="ckbh" data-event-opts="{{[['^tap',[['queryMore',[false,'','CKINFO','ckbh']]]]]}}" bind:tap="__e" class="data-v-866840f6" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('469edbbe-19')+','+('469edbbe-18')}}" placeholder="请选择报损仓库" disabled="{{true}}" disabledColor="{{state=='pladd'||state=='edit'||state=='look'||state=='check'?'#F5F7FA':'#fff'}}" value="{{uFormTitle.ckbh}}" data-event-opts="{{[['^input',[['__set_model',['$0','ckbh','$event',[]],['uFormTitle']]]]]}}" class="data-v-866840f6" bind:__l="__l"></u-input></u-form-item><u-form-item vue-id="{{('469edbbe-20')+','+('469edbbe-7')}}" label="退换类型" labelWidth="{{76}}" prop="tklx" data-event-opts="{{[['^tap',[['queryMore',[false,'','TKLX','tklx']]]]]}}" bind:tap="__e" class="data-v-866840f6" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('469edbbe-21')+','+('469edbbe-20')}}" placeholder="请选择退换类型" disabled="{{true}}" disabledColor="{{state=='pladd'||state=='edit'||state=='look'||state=='check'?'#F5F7FA':'#fff'}}" value="{{uFormTitle.tklx}}" data-event-opts="{{[['^input',[['__set_model',['$0','tklx','$event',[]],['uFormTitle']]]]]}}" class="data-v-866840f6" bind:__l="__l"></u-input></u-form-item><u-form-item vue-id="{{('469edbbe-22')+','+('469edbbe-7')}}" label="原始单号" labelWidth="{{76}}" prop="ysdh" class="data-v-866840f6" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('469edbbe-23')+','+('469edbbe-22')}}" placeholder="请输入原始单号" disabled="{{state=='look'||state=='check'}}" value="{{uFormTitle.ysdh}}" data-event-opts="{{[['^input',[['__set_model',['$0','ysdh','$event',[]],['uFormTitle']]]]]}}" class="data-v-866840f6" bind:__l="__l"></u-input></u-form-item><u-form-item vue-id="{{('469edbbe-24')+','+('469edbbe-7')}}" label="备注说明" labelWidth="{{76}}" prop="remarks" class="data-v-866840f6" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('469edbbe-25')+','+('469edbbe-24')}}" placeholder="请输入备注说明" disabled="{{state=='look'||state=='check'}}" value="{{uFormTitle.remarks}}" data-event-opts="{{[['^input',[['__set_model',['$0','remarks','$event',[]],['uFormTitle']]]]]}}" class="data-v-866840f6" bind:__l="__l"></u-input></u-form-item></u-form><view class="flex-btns data-v-866840f6"><u-button class="my-primary-button data-v-866840f6" vue-id="469edbbe-26" type="primary" text="报审" disabled="{{state=='add'||state=='look'||state=='check'}}" throttleTime="2000" data-event-opts="{{[['^tap',[['subCheck']]]]}}" bind:tap="__e" bind:__l="__l"></u-button><u-button class="my-primary-button data-v-866840f6" vue-id="469edbbe-27" type="primary" text="删单" disabled="{{state=='add'||state=='look'||state=='check'}}" throttleTime="2000" data-event-opts="{{[['^tap',[['deldh']]]]}}" bind:tap="__e" bind:__l="__l"></u-button><u-button class="my-primary-button data-v-866840f6" vue-id="469edbbe-28" type="primary" text="新增明细" disabled="{{state=='look'||state=='check'}}" throttleTime="2000" data-event-opts="{{[['^tap',[['getcolumns']]]]}}" bind:tap="__e" bind:__l="__l"></u-button></view></view></view><view hidden="{{!(contentShow)}}" class="data-v-866840f6"><u-form class="form-card data-v-866840f6 vue-ref" vue-id="469edbbe-29" labelPosition="left" model="{{uFormModel}}" rules="{{uFormRules}}" data-ref="uForm" bind:__l="__l" vue-slots="{{['default']}}"><u-form-item data-custom-hidden="{{!(doingindex>=0)}}" class="shoping data-v-866840f6" vue-id="{{('469edbbe-30')+','+('469edbbe-29')}}" label="商品编码" labelWidth="{{74}}" prop="spbm" bind:__l="__l" vue-slots="{{['default']}}"><u-input vue-id="{{('469edbbe-31')+','+('469edbbe-30')}}" placeholder="请输入商品编码/名称/简码" disabled="{{isVoiceMode}}" focus="{{focusObj.spbmFocus}}" value="{{uFormModel.spbm}}" data-event-opts="{{[['^change',[['spbmChange']]],['^input',[['__set_model',['$0','spbm','$event',[]],['uFormModel']]]]]}}" bind:change="__e" bind:input="__e" class="data-v-866840f6" bind:__l="__l" vue-slots="{{['suffix']}}"><view slot="suffix" class="data-v-866840f6"><block wx:if="{{uFormModel.spbm!=''}}"><uni-icons vue-id="{{('469edbbe-32')+','+('469edbbe-31')}}" type="clear" size="19" color="#e1e1e1" data-event-opts="{{[['^tap',[['clearAlone',['spbm']]]]]}}" bind:tap="__e" class="data-v-866840f6" bind:__l="__l"></uni-icons></block></view></u-input><block wx:if="{{isVoiceMode}}"><uni-icons vue-id="{{('469edbbe-33')+','+('469edbbe-30')}}" custom-prefix="iconfont" type="icon-yuyin" color="{{doingId=='shoping'?'#358CC9':'#7A7A7A'}}" size="19" data-event-opts="{{[['^tap',[['clickYuyin',['shoping',false]]]]]}}" bind:tap="__e" class="data-v-866840f6" bind:__l="__l"></uni-icons></block><block wx:if="{{!isVoiceMode&&!ispda}}"><uni-icons vue-id="{{('469edbbe-34')+','+('469edbbe-30')}}" custom-prefix="iconfont" type="icon-shouye" size="20" color="#606060" data-event-opts="{{[['^tap',[['scan']]]]}}" bind:tap="__e" class="data-v-866840f6" bind:__l="__l"></uni-icons></block></u-form-item><view class="data-v-866840f6"><view class="shopTishi data-v-866840f6"><block wx:if="{{uFormModel.spmc}}"><view class="shopTishi-view show-dots data-v-866840f6"><text class="left-con data-v-866840f6">名称-条码:</text><text class="data-v-866840f6">{{uFormModel.spmc}}</text>-<text class="data-v-866840f6">{{uFormModel.spsmm}}</text></view></block></view><view class="shopTishi data-v-866840f6"><block wx:if="{{uFormModel.dw}}"><view class="shopTishi-view-half data-v-866840f6"><text class="left-con data-v-866840f6">单位:</text><text class="data-v-866840f6">{{uFormModel.dw}}</text></view></block><block wx:if="{{uFormModel.gg}}"><view class="shopTishi-view-half data-v-866840f6"><text class="left-con data-v-866840f6">规格:</text><text class="data-v-866840f6">{{uFormModel.gg}}</text></view></block></view></view><u-form-item data-custom-hidden="{{!(doingindex>=1)}}" vue-id="{{('469edbbe-35')+','+('469edbbe-29')}}" label="库存批号" labelWidth="{{74}}" prop="kcph" class="data-v-866840f6" bind:__l="__l" vue-slots="{{['default']}}"><u-input vue-id="{{('469edbbe-36')+','+('469edbbe-35')}}" placeholder="请选择库存批号" type="text" readonly="{{true}}" focus="{{focusObj.kcphFocus}}" value="{{uFormModel.kcph}}" data-event-opts="{{[['^tap',[['serchKcph']]],['^input',[['__set_model',['$0','kcph','$event',[]],['uFormModel']]]]]}}" bind:tap="__e" bind:input="__e" class="data-v-866840f6" bind:__l="__l"></u-input><block wx:if="{{isVoiceMode}}"><uni-icons vue-id="{{('469edbbe-37')+','+('469edbbe-35')}}" custom-prefix="iconfont" type="icon-yuyin" color="{{doingId=='num'?'#358CC9':'#7A7A7A'}}" size="19" class="data-v-866840f6" bind:__l="__l"></uni-icons></block><block wx:else><text class="inp-right-text data-v-866840f6"></text></block></u-form-item><u-form-item data-custom-hidden="{{!(doingindex>=2)}}" vue-id="{{('469edbbe-38')+','+('469edbbe-29')}}" label="报损数量" labelWidth="{{74}}" prop="bssl" class="data-v-866840f6" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('469edbbe-39')+','+('469edbbe-38')}}" placeholder="请输入报损数量" type="number" focus="{{focusObj.numFocus}}" value="{{uFormModel.bssl}}" data-event-opts="{{[['^input',[['__set_model',['$0','bssl','$event',[]],['uFormModel']]]]]}}" class="data-v-866840f6" bind:__l="__l"></u-input><block wx:if="{{isVoiceMode}}"><uni-icons vue-id="{{('469edbbe-40')+','+('469edbbe-38')}}" custom-prefix="iconfont" type="icon-yuyin" color="{{doingId=='num'?'#358CC9':'#7A7A7A'}}" size="19" data-event-opts="{{[['^tap',[['clickYuyin',['num',false]]]]]}}" bind:tap="__e" class="data-v-866840f6" bind:__l="__l"></uni-icons></block><block wx:else><text class="inp-right-text data-v-866840f6"></text></block></u-form-item><u-form-item data-custom-hidden="{{!(doingindex>=3)}}" vue-id="{{('469edbbe-41')+','+('469edbbe-29')}}" label="报损价格" labelWidth="{{74}}" prop="bsjg" class="data-v-866840f6" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('469edbbe-42')+','+('469edbbe-41')}}" placeholder="请输入报损价格" type="number" focus="{{focusObj.priceFocus}}" value="{{uFormModel.bsjg}}" data-event-opts="{{[['^input',[['__set_model',['$0','bsjg','$event',[]],['uFormModel']]]]]}}" class="data-v-866840f6" bind:__l="__l"></u-input><block wx:if="{{isVoiceMode}}"><uni-icons vue-id="{{('469edbbe-43')+','+('469edbbe-41')}}" custom-prefix="iconfont" type="icon-yuyin" color="{{doingId=='price'?'#358CC9':'#7A7A7A'}}" size="19" data-event-opts="{{[['^tap',[['clickYuyin',['price',false]]]]]}}" bind:tap="__e" class="data-v-866840f6" bind:__l="__l"></uni-icons></block><block wx:else><text class="inp-right-text data-v-866840f6"></text></block></u-form-item></u-form></view></view><u-button data-custom-hidden="{{!(ifpage&&contentShow)}}" class="my-primary-button sticky-bottom data-v-866840f6" vue-id="469edbbe-44" type="primary" text="保存" throttleTime="2000" data-event-opts="{{[['^tap',[['save']]]]}}" bind:tap="__e" bind:__l="__l"></u-button><view hidden="{{!(!ifpage)}}" class="box-content data-v-866840f6"><edit vue-id="469edbbe-45" title="{{editTitleObj}}" tableData="{{tableData}}" state="{{state}}" data-ref="editDetail" data-event-opts="{{[['^editSave',[['editSave']]],['^delgoods',[['delgoods']]]]}}" bind:editSave="__e" bind:delgoods="__e" class="data-v-866840f6 vue-ref" bind:__l="__l"></edit></view><ocr-text data-custom-hidden="{{!(ocrShow)}}" bind:ocrBack="__e" vue-id="469edbbe-46" data-event-opts="{{[['^ocrBack',[['ocrBack']]]]}}" class="data-v-866840f6" bind:__l="__l"></ocr-text><u-overlay vue-id="469edbbe-47" show="{{coverShow}}" class="data-v-866840f6" bind:__l="__l"></u-overlay><u-toast vue-id="469edbbe-48" data-ref="uToast" class="data-v-866840f6 vue-ref" bind:__l="__l"></u-toast><u-popup class="u-popup-center data-v-866840f6" vue-id="469edbbe-49" show="{{popupShow}}" mode="center" zIndex="5000" bind:__l="__l" vue-slots="{{['default']}}"><scroll-view style="max-height:60vh;" scroll-y="true" class="data-v-866840f6"><block wx:if="{{ifDrawer=='title'}}"><view class="data-v-866840f6"><block wx:for="{{selectData}}" wx:for-item="v" wx:for-index="i"><view data-event-opts="{{[['tap',[['titleChange',['$0','$1'],[[['selectData','',i,'id']],[['selectData','',i,'name']]]]]]]}}" class="list data-v-866840f6" bindtap="__e"><text class="data-v-866840f6">{{v.id}}</text>-<text class="data-v-866840f6">{{v.name}}</text></view></block></view></block><block wx:else><block wx:if="{{ifDrawer=='goods'}}"><view class="shop data-v-866840f6"><block wx:for="{{selectData}}" wx:for-item="v" wx:for-index="i"><view data-event-opts="{{[['tap',[['setForm',['$0',false],[[['selectData','',i]]]]]]]}}" class="list data-v-866840f6" bindtap="__e"><view class="shop-l data-v-866840f6">{{i+1+":"}}</view><view class="shop-r data-v-866840f6"><view class="shop-r-t data-v-866840f6"><text class="t-name data-v-866840f6">{{v.spmc}}</text><text class="t-price data-v-866840f6">{{"￥"+v.nsjg}}</text></view><view class="shop-r-b data-v-866840f6"><view class="data-v-866840f6"><text class="b-xi data-v-866840f6">编码:</text><text class="b-cu data-v-866840f6">{{v.spbm}}</text></view><view class="data-v-866840f6"><text class="b-xi data-v-866840f6">条码:</text><text class="b-cu data-v-866840f6">{{v.spsmm}}</text></view></view></view></view></block></view></block></block></scroll-view><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="closebtn data-v-866840f6" bindtap="__e">取消</view></u-popup><movable-area hidden="{{!(ifpage&&contentShow)}}" class="movable-area data-v-866840f6"><movable-view hidden="{{!(!isVoiceMode)}}" class="movable-view data-v-866840f6" x="{{x}}" y="{{y}}" direction="all" animation="{{true}}" out-of-bounds="{{false}}"><view data-event-opts="{{[['tap',[['changeDh',['$event']]]]]}}" class="iconimgs guideJS2 data-v-866840f6" bindtap="__e"><view class="iconView data-v-866840f6"><uni-icons vue-id="469edbbe-50" type="more-filled" size="30" color="#fff" class="data-v-866840f6" bind:__l="__l"></uni-icons></view><uni-transition class="uni-transition data-v-866840f6 vue-ref" vue-id="469edbbe-51" mode-class="fade" show="{{true}}" data-ref="uniTransition" bind:__l="__l" vue-slots="{{['default']}}"><view class="my-fab-view data-v-866840f6" style="width:46px;"></view><view data-event-opts="{{[['tap',[['changeSwitch',['$event']]]]]}}" class="my-fab-view data-v-866840f6" bindtap="__e"><uni-icons vue-id="{{('469edbbe-52')+','+('469edbbe-51')}}" custom-prefix="iconfont" type="icon-yuyin" color="#fff" size="30" class="data-v-866840f6" bind:__l="__l"></uni-icons><view class="data-v-866840f6">语音</view></view><view data-event-opts="{{[['tap',[['toOcr',['$event']]]]]}}" class="my-fab-view data-v-866840f6" bindtap="__e"><uni-icons vue-id="{{('469edbbe-53')+','+('469edbbe-51')}}" custom-prefix="iconfont" type="icon-OCRshibieguanli" color="#fff" size="30" class="data-v-866840f6" bind:__l="__l"></uni-icons><view class="data-v-866840f6">表格识别</view></view></uni-transition></view></movable-view><movable-view hidden="{{!(isVoiceMode)}}" class="movable-view movable-view-large data-v-866840f6" x="{{x}}" y="{{y}}" direction="all" animation="{{true}}" out-of-bounds="{{false}}"><goods-voice vue-id="469edbbe-54" step="{{yuyinModelArr}}" list="{{selectData}}" searchCode="{{searchCode}}" data-ref="goodsVoice" data-event-opts="{{[['^updateList',[['__set_sync',['$0','selectData','$event'],['']]]],['^changeParentValue',[['changeParentValue']]],['^changeVoiceShow',[['changeVoiceShow']]],['^doing',[['doing']]]]}}" bind:updateList="__e" bind:changeParentValue="__e" bind:changeVoiceShow="__e" bind:doing="__e" class="data-v-866840f6 vue-ref" bind:__l="__l"></goods-voice></movable-view></movable-area></view>