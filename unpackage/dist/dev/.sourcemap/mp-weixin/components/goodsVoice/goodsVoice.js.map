{"version":3,"sources":["uni-app:///main.js","webpack:////Users/coderyh/Downloads/ydyyapp/components/goodsVoice/goodsVoice.vue?e63b","webpack:////Users/coderyh/Downloads/ydyyapp/components/goodsVoice/goodsVoice.vue?70f2","webpack:////Users/coderyh/Downloads/ydyyapp/components/goodsVoice/goodsVoice.vue?69c2","webpack:////Users/coderyh/Downloads/ydyyapp/components/goodsVoice/goodsVoice.vue?a1f8","uni-app:///components/goodsVoice/goodsVoice.vue","webpack:////Users/coderyh/Downloads/ydyyapp/components/goodsVoice/goodsVoice.vue?fd64","webpack:////Users/coderyh/Downloads/ydyyapp/components/goodsVoice/goodsVoice.vue?a3ad"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,iH,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,mBAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACsC;;;AAG/F;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uTAEN;AACP,KAAK;AACL;AACA,aAAa,sOAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAAyzB,CAAgB,wyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoC70B;AACA,oBADA;AAEA;AACA;AACA,iBADA;AAEA;AACA;AACA,OAJA,EADA;;AAOA;AACA,iBADA;AAEA,iBAFA,EAPA;;AAWA;AACA,kBADA;AAEA,kBAFA,EAXA,EAFA;;;AAkBA,MAlBA,kBAkBA;AACA;AACA,qDADA;AAEA,mBAFA;AAGA,cAHA;AAIA,eAJA;AAKA,0BALA;AAMA,gBANA;AAOA,oBAPA;AAQA,sBARA;AASA,cATA;AAUA,oBAVA;;AAYA,GA/BA;AAgCA,SAhCA,qBAgCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA,GA3JA;AA4JA;AACA,UADA,oBACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA,KAVA;AAWA;AACA,YAZA,oBAYA,GAZA,EAYA;AACA;AACA;;;;AAIA;AACA,OANA,MAMA;AACA;AACA;AACA;AACA,KAvBA;AAwBA,eAxBA,yBAwBA;AACA;AACA;;;;;AAKA;AACA,+BARA,CAQA;AACA;AACA,oCAVA,CAUA;AACA,6BAXA,CAWA;AACA;AACA,kCAbA,CAaA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA,KAtIA;AAuIA,aAvIA,uBAuIA;AACA;;;;AAIA,KA5IA;AA6IA;AACA,YA9IA,oBA8IA,KA9IA,EA8IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAZA;AAaA,OAjBA,MAiBA;AACA;AACA;AACA,sCADA;AAEA,iDAFA;AAGA,oDAHA;AAIA,qDAJA;AAKA,gDALA,EADA;;AAQA;AACA;AACA;AACA,aAHA;AAIA;AACA;AACA;AACA;;AAEA,eAFA,MAEA;AACA;AACA;AACA;AACA;AACA,aAdA,EARA;;;AAyBA;AACA,KAzMA;AA0MA;AACA,eA3MA,uBA2MA,SA3MA,EA2MA,KA3MA,EA2MA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAPA;AAQA,SAZA,MAYA;AACA;AACA;AACA,0BADA;AAEA,mDAFA;AAGA,sDAHA;AAIA,uDAJA;AAKA,kDALA,EADA;;AAQA;AACA;AACA;AACA,eAHA;AAIA;AACA;AACA;AACA;AACA;AACA,eATA,EARA;;;AAoBA;AACA,OApCA,MAoCA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA,kDADA;AAEA,wCAFA;AAGA,oBAHA;AAIA,gCAJA;AAKA,oDALA;AAMA,wDANA;AAOA,0DAPA;AAQA,4DARA;;AAUA,OAjBA,MAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WALA;AAMA,SAVA,MAUA;AACA;AACA;AACA,4BADA;AAEA,mDAFA;AAGA,sDAHA;AAIA,uDAJA;AAKA,kDALA,EADA;;AAQA;AACA;AACA;AACA,eAHA;AAIA;AACA;AACA;AACA,eAPA,EARA;;;AAkBA;AACA;AACA,KArTA;AAsTA;AACA,UAvTA,kBAuTA,GAvTA,EAuTA;AACA;AACA,cADA,EACA,QADA,EACA,QADA,EACA,QADA,EACA,QADA,EACA,QADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA;AAKA,OANA;AAOA;AACA,KArUA;AAsUA;AACA,cAvUA,sBAuUA,KAvUA,EAuUA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,cADA;AAEA,YAFA;AAGA,YAHA;AAIA,YAJA;AAKA,YALA;AAMA,YANA;AAOA,YAPA;AAQA,YARA;AASA,YATA;AAUA,YAVA;AAWA,YAXA;;AAaA;AACA;AACA,mBADA;AAEA,wBAFA,EADA;;AAKA;AACA,oBADA;AAEA,wBAFA,EALA;;AASA;AACA,qBADA;AAEA,wBAFA,EATA;;AAaA;AACA,sBADA;AAEA,uBAFA,EAbA;;AAiBA;AACA,0BADA;AAEA,uBAFA,EAjBA;;;AAsBA;AACA,aADA;AAEA,cAFA;AAGA,cAHA;AAIA,cAJA;AAKA,cALA;AAMA,cANA;AAOA,cAPA;AAQA,cARA;AASA,cATA;AAUA,cAVA;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA,MAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAXA,MAWA;AACA;AACA;AACA,KA5aA;AA6aA,eA7aA,uBA6aA,GA7aA,EA6aA,OA7aA,EA6aA;AACA;AACA;AACA,gBADA;AAEA,eAFA,mBAEA,GAFA,EAEA;AACA;AACA,0CADA;AAEA;AACA;AACA;AACA;AACA,aANA;AAOA,wCAPA;;AASA,SAZA;AAaA,YAbA,gBAaA,GAbA,EAaA,EAbA;;AAeA,KA9bA,EA5JA;;;AA6lBA;AACA;AACA;AACA;AACA;AACA,KALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA,KAZA;AAaA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KAxBA,EA7lBA,E;;;;;;;;;;;;;ACpCA;AAAA;AAAA;AAAA;AAAoiD,CAAgB,+7CAAG,EAAC,C;;;;;;;;;;;ACAxjD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/goodsVoice/goodsVoice.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './components/goodsVoice/goodsVoice.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./goodsVoice.vue?vue&type=template&id=2abb6e44&scoped=true&\"\nvar renderjs\nimport script from \"./goodsVoice.vue?vue&type=script&lang=js&\"\nexport * from \"./goodsVoice.vue?vue&type=script&lang=js&\"\nimport style0 from \"./goodsVoice.vue?vue&type=style&index=0&id=2abb6e44&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2abb6e44\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/goodsVoice/goodsVoice.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goodsVoice.vue?vue&type=template&id=2abb6e44&scoped=true&\"","var components\ntry {\n  components = {\n    uniIcons: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uToast: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-toast/u-toast\" */ \"uview-ui/components/u-toast/u-toast.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goodsVoice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goodsVoice.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"box-compents\">\r\n\t\t<view class=\"box-voice\">\r\n\t\t\t<view class=\"xtts\">{{xtts}}</view>\r\n\t\t\t<view class=\"butt-ts\">{{buttTs}}</view>\r\n\t\t\t<view class=\"last-list\">\r\n\t\t\t\t<view class=\"user-zi\">{{text}}</view>\r\n\t\t\t\t<view class=\"iconView\">\r\n\t\t\t\t\t<uni-icons custom-prefix=\"iconfont\" type=\"icon-zanting\" color=\"#fff\" size=\"32\" @tap=\"tochange('order')\" v-show=\"!dhShow&&state=='order'\"></uni-icons>\r\n\t\t\t\t\t<uni-icons custom-prefix=\"iconfont\" type=\"icon-triangle-right\" color=\"#fff\" size=\"32\" @tap=\"tochange('pause')\" v-show=\"state=='pause'\"></uni-icons>\r\n\t\t\t\t\t<div class=\"pl4-dh\" v-show=\"dhShow&&state=='order'\" @tap=\"tochange('order')\">\r\n\t\t\t\t\t\t<div class=\"pl4__a\"></div>\r\n\t\t\t\t\t\t<div class=\"pl4__b\"></div>\r\n\t\t\t\t\t\t<div class=\"pl4__c\"></div>\r\n\t\t\t\t\t\t<div class=\"pl4__d\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t <!-- @tap=\"tochange('playing')\" -->\r\n\t\t\t\t\t<div class=\"pl4\" v-show=\"!dhShow&&state==''\">\r\n\t\t\t\t\t\t<div class=\"pl4__a\"></div>\r\n\t\t\t\t\t\t<div class=\"pl4__b\"></div>\r\n\t\t\t\t\t\t<div class=\"pl4__c\"></div>\r\n\t\t\t\t\t\t<div class=\"pl4__d\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"exit-zi\" @tap=\"toexit\" v-show=\"dhShow||state!=''\">退出</text>\r\n\t\t\t\r\n\t\t\t\r\n\t\t</view>\r\n\t\t\r\n\t\t<u-toast ref=\"uToast\"></u-toast>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: \"goodsVoice\",\r\n\t\tprops: {\r\n\t\t\tstep: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: () => {\r\n\t\t\t\t\treturn []\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlist: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: []\r\n\t\t\t},\r\n\t\t\tsearchCode: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 400\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\terrTimes: uni.getStorageSync(\"speech_errTimes\"),\r\n\t\t\t\tdhShow: false,\r\n\t\t\t\ttext: \"\",\r\n\t\t\t\tstate: \"\",\r\n\t\t\t\txtts: \"小麦在听，请根据提示对话\",\r\n\t\t\t\tbuttTs: \"\",\r\n\t\t\t\tsecondList: [],\r\n\t\t\t\tnextIndex: false,\r\n\t\t\t\tindex: 0,\r\n\t\t\t\tisAgain:false\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tplus.speech.addEventListener(\"recognition\", (event) => {\r\n\t\t\t\t// console.log(\"！！！！！！！！！监听 语音输入结束！！！！！！！！！！！event\",event)\r\n\t\t\t\t\r\n\t\t\t\tif(this.isAgain){//通过说出第几个 再次选择\r\n\t\t\t\t\tlet upNum=this.cutNum(event.result)\r\n\t\t\t\t\tlet onlyNum=this.toUpperNum(upNum)\r\n\t\t\t\t\tif(onlyNum>=1){\r\n\t\t\t\t\t\tlet arr=[]\r\n\t\t\t\t\t\tarr.push(this.list[onlyNum-1])\r\n\t\t\t\t\t\tthis.list=arr\r\n\t\t\t\t\t\tthis.chooseValue(this.nextIndex, this.index)\r\n\t\t\t\t\t\tthis.isAgain=false\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.state=\"\"\r\n\t\t\t\t\t\tif(uni.getStorageSync(\"$voice-noCon\")){//有本地音频\r\n\t\t\t\t\t\t\tlet audioLocal=uni.createInnerAudioContext();\r\n\t\t\t\t\t\t\taudioLocal.src = uni.getStorageSync(\"$voice-noCon\")\r\n\t\t\t\t\t\t\taudioLocal.play();\r\n\t\t\t\t\t\t\taudioLocal.onEnded(() => {\r\n\t\t\t\t\t\t\t\tthis.state=\"order\"\r\n\t\t\t\t\t\t\t\tthis.isAgain=true\r\n\t\t\t\t\t\t\t\tthis.startRecord()\r\n\t\t\t\t\t\t\t\taudioLocal.destroy();\r\n\t\t\t\t\t\t\t\taudioLocal = null\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.$voice({\r\n\t\t\t\t\t\t\t\tvoiceSet: {\r\n\t\t\t\t\t\t\t\t\ttex: \"没有匹配到内容\",\r\n\t\t\t\t\t\t\t\t\tspd: uni.getStorageSync(\"voice_yusu\"),\r\n\t\t\t\t\t\t\t\t\tpit: uni.getStorageSync(\"voice_yindiao\"),\r\n\t\t\t\t\t\t\t\t\tvol: uni.getStorageSync(\"voice_yinliang\"),\r\n\t\t\t\t\t\t\t\t\tper: uni.getStorageSync(\"voice_per\")\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\taudioCallback: {\r\n\t\t\t\t\t\t\t\t\tonPlay:()=>{\r\n\t\t\t\t\t\t\t\t\t\tthis.downLoadMp3(uni._audio.src,\"$voice-noCon\")\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tonEnded: () => {\r\n\t\t\t\t\t\t\t\t\t\tthis.state=\"order\"\r\n\t\t\t\t\t\t\t\t\t\tthis.isAgain=true\r\n\t\t\t\t\t\t\t\t\t\tthis.startRecord()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(this.step[this.index].isSkip){ //该步骤是否可以跳过，不需要输入\r\n\t\t\t\t\tlet arrS=[\"跳过\",\"下一步\",\"下一项\",\"下一个\",\"no\",\"不\"]\r\n\t\t\t\t\tfor(var i in arrS){\r\n\t\t\t\t\t\tif(arrS[i].indexOf(event.result)>-1){\r\n\t\t\t\t\t\t\tthis.stepFunc(this.index+1)\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.step[this.index].isSearchCon) { // 需要搜索内容\r\n\t\t\t\t\tif (this.step[this.index].fixedId == \"lx\") { // 供价类型语音输入\r\n\t\t\t\t\t\tthis.$parent[this.step[this.index].searchFunc](event.result,false)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.$parent[this.step[this.index].searchFunc](event.result)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else { // 不需要搜索内容\r\n\t\t\t\t\tif (this.step[this.index].searchFunc) { // 需要搜索\r\n\t\t\t\t\t\tthis.chooseValue(this.nextIndex, this.index)\r\n\t\t\t\t\t} else { // 不需要搜索\r\n\t\t\t\t\t\tlet textRes=\"\"\r\n\t\t\t\t\t\tif(this.step[this.index].fixedId==\"num\"||this.step[this.index].fixedId==\"price\"){\r\n\t\t\t\t\t\t\tvar reg = /^[.0-9]+$/\r\n\t\t\t\t\t\t\tlet regChina=/^[\\u4e00-\\u9fa5]{0,}$/\r\n\t\t\t\t\t\t\tif(reg.test(event.result)){//只存在数字和小数点\r\n\t\t\t\t\t\t\t\ttextRes=event.result\r\n\t\t\t\t\t\t\t}else if(regChina.test(event.result)){\r\n\t\t\t\t\t\t\t\tlet uperNum=this.cutNum(event.result)\r\n\t\t\t\t\t\t\t\tlet xx = this.toUpperNum(uperNum);\r\n\t\t\t\t\t\t\t\ttextRes=xx\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\ttextRes=event.result.replace(/[^.0-9]/ig,\"\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else if(this.step[this.index].fixedId==\"switch\"){//是滑动开关\r\n\t\t\t\t\t\t\tlet arr=[\"确定\",\"是的\",\"是赠送商品\",\"yes\",\"嗯嗯嗯\",\"对的\",\"确认\",\"肯定\",\"绝对\",\"正确\",\"必须\",\"中\",\"大善\"]\r\n\t\t\t\t\t\t\ttextRes=false\r\n\t\t\t\t\t\t\tfor(var i in arr){\r\n\t\t\t\t\t\t\t\tif(arr[i].indexOf(event.result)>-1){\r\n\t\t\t\t\t\t\t\t\ttextRes=true\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else if(this.step[this.index].fixedId==\"rq\"){//是日期选项\r\n\t\t\t\t\t\t\tlet year=event.result.split(\"年\")[0]\r\n\t\t\t\t\t\t\tlet month=event.result.split(\"年\")[1].split(\"月\")[0]\r\n\t\t\t\t\t\t\tlet day=event.result.split(\"月\")[1].replace(/([^\\u0000-\\u00FF])/g,\"\")\r\n\t\t\t\t\t\t\ttextRes=`${year}-${month}-${day}`\r\n\t\t\t\t\t\t}else if(this.step[this.index].fixedId==\"save\"){\r\n\t\t\t\t\t\t\tlet arr=[\"确定\",\"是的\",\"保存\",\"yes\",\"嗯嗯嗯\",\"对的\",\"确认\",\"肯定\",\"绝对\",\"正确\",\"必须\",\"中\",\"大善\"]\r\n\t\t\t\t\t\t\tfor(var i in arr){\r\n\t\t\t\t\t\t\t\tif(arr[i].indexOf(event.result)>-1){\r\n\t\t\t\t\t\t\t\t\tthis.$parent[this.step[this.index].completeFunc]()\r\n\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ttextRes=event.result\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.$emit(\"changeParentValue\", {\r\n\t\t\t\t\t\t\t\"fixedId\": this.step[this.index].fixedId,\r\n\t\t\t\t\t\t\t\"id\": this.step[this.index].id,\r\n\t\t\t\t\t\t\t\"val\": textRes,\r\n\t\t\t\t\t\t\t\"next\": this.nextIndex,\r\n\t\t\t\t\t\t\t\"nextFunc\": this.step[this.index].nextFunc,\r\n\t\t\t\t\t\t\t\"searchFunc\": this.step[this.index].searchFunc,\r\n\t\t\t\t\t\t\t\"isSearchCon\": this.step[this.index].isSearchCon,\r\n\t\t\t\t\t\t\t\"completeFunc\": this.step[this.index].completeFunc\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\ttoexit(){\r\n\t\t\t\tthis.dhShow = false\r\n\t\t\t\tthis.state=\"\"\r\n\t\t\t\tthis.errTimes=uni.getStorageSync(\"speech_errTimes\")\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tplus.speech.stopRecognize();\r\n\t\t\t\t// #endif\r\n\t\t\t\tthis.$emit(\"changeVoiceShow\")\r\n\t\t\t\treturn\r\n\t\t\t},\r\n\t\t\t//改变播报状态\r\n\t\t\ttochange(val){\r\n\t\t\t\tif(val==\"order\"){\r\n\t\t\t\t\tthis.dhShow = false\r\n\t\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t\tplus.speech.stopRecognize();\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\tthis.state=\"pause\"\r\n\t\t\t\t}else if(val==\"pause\"){\r\n\t\t\t\t\tthis.state=\"order\"\r\n\t\t\t\t\tthis.stepFunc(this.index)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstartRecord() {\r\n\t\t\t\tthis.text = \"\"\r\n\t\t\t\tthis.dhShow = true\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tplus.device.vibrate(300)\r\n\t\t\t\t// #endif\r\n\t\t\t\t\r\n\t\t\t\tvar options = {};\r\n\t\t\t\toptions.continue = false; // false:表示语音引擎根据语音输入自动结束\r\n\t\t\t\toptions.engine = 'baidu';\r\n\t\t\t\toptions.userInterface = false; // true:显示默认用户界面\r\n\t\t\t\toptions.lang = \"zh-cn\"; // \"zh-cn\"-普通话；\"en-us\"-英语；\"zh-cantonese\"-粤语；   ×××\"zh-henanese\"-河南话（百度语音识别不支持河南话）\r\n\t\t\t\t// uni.getStorageSync(\"speech_lang\");\r\n\t\t\t\toptions.punctuation = false; // 识别结果中是否包含标点符号\r\n\t\t\t\t// 开始语音识别\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tplus.speech.startRecognize(options, (s)=> {\r\n\t\t\t\t\tthis.errTimes=uni.getStorageSync(\"speech_errTimes\")\r\n\t\t\t\t\tthis.text += s;\r\n\t\t\t\t\tconsole.log(\"this.text\", this.text)\r\n\t\t\t\t\tthis.dhShow = false\r\n\t\t\t\t}, (e)=> {\r\n\t\t\t\t\tif(e.code==3&&e.message.indexOf(\"No Permission\")>-1){\r\n\t\t\t\t\t\tthis.$refs.uToast.show({\r\n\t\t\t\t\t\t\ttype: \"default\",\r\n\t\t\t\t\t\t\tmessage: \"请打开麦克风权限\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.tochange(\"order\")\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\tuni.openAppAuthorizeSetting({\r\n\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},1900)\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log(\"语音识别失败 eeeeeeeeeee\", e)\r\n\t\t\t\t\tthis.$refs.uToast.show({\r\n\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\tmessage: \"语音识别失败\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.errTimes-=1\r\n\t\t\t\t\tthis.dhShow = false\r\n\t\t\t\t\tif(this.errTimes>0){//没有超过3次错误机会\r\n\t\t\t\t\t\tthis.state=\"\"\r\n\t\t\t\t\t\tif(uni.getStorageSync(\"$voice-noHear\")){//有本地音频\r\n\t\t\t\t\t\t\tlet audioLocal=uni.createInnerAudioContext();\r\n\t\t\t\t\t\t\taudioLocal.src = uni.getStorageSync(\"$voice-noHear\")\r\n\t\t\t\t\t\t\taudioLocal.play();\r\n\t\t\t\t\t\t\taudioLocal.onEnded(() => {\r\n\t\t\t\t\t\t\t\tthis.state=\"order\"\r\n\t\t\t\t\t\t\t\tthis.startRecord()\r\n\t\t\t\t\t\t\t\taudioLocal.destroy();\r\n\t\t\t\t\t\t\t\taudioLocal = null\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.$voice({\r\n\t\t\t\t\t\t\t\tvoiceSet: {\r\n\t\t\t\t\t\t\t\t\ttex: \"没有听清,请再说一次\",\r\n\t\t\t\t\t\t\t\t\tspd: uni.getStorageSync(\"voice_yusu\"),\r\n\t\t\t\t\t\t\t\t\tpit: uni.getStorageSync(\"voice_yindiao\"),\r\n\t\t\t\t\t\t\t\t\tvol: uni.getStorageSync(\"voice_yinliang\"),\r\n\t\t\t\t\t\t\t\t\tper: uni.getStorageSync(\"voice_per\")\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\taudioCallback: {\r\n\t\t\t\t\t\t\t\t\tonPlay:()=>{\r\n\t\t\t\t\t\t\t\t\t\tthis.downLoadMp3(uni._audio.src,\"$voice-noHear\")\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tonEnded: () => {\r\n\t\t\t\t\t\t\t\t\t\tthis.state=\"order\"\r\n\t\t\t\t\t\t\t\t\t\tthis.startRecord()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.state=\"pause\"\r\n\t\t\t\t\t\tthis.dhShow=false\r\n\t\t\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t\t\tplus.speech.stopRecognize();\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\tif(uni.getStorageSync(\"$voice-pause\")){//有本地音频\r\n\t\t\t\t\t\t\tlet audioLocal=uni.createInnerAudioContext();\r\n\t\t\t\t\t\t\taudioLocal.src = uni.getStorageSync(\"$voice-pause\")\r\n\t\t\t\t\t\t\taudioLocal.play();\r\n\t\t\t\t\t\t\taudioLocal.onEnded(() => {\r\n\t\t\t\t\t\t\t\taudioLocal.destroy();\r\n\t\t\t\t\t\t\t\taudioLocal = null\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.$voice({\r\n\t\t\t\t\t\t\t\tvoiceSet: {\r\n\t\t\t\t\t\t\t\t\ttex: \"语音已暂停\",\r\n\t\t\t\t\t\t\t\t\tspd: uni.getStorageSync(\"voice_yusu\"),\r\n\t\t\t\t\t\t\t\t\tpit: uni.getStorageSync(\"voice_yindiao\"),\r\n\t\t\t\t\t\t\t\t\tvol: uni.getStorageSync(\"voice_yinliang\"),\r\n\t\t\t\t\t\t\t\t\tper: uni.getStorageSync(\"voice_per\")\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\taudioCallback: {\r\n\t\t\t\t\t\t\t\t\tonPlay:()=>{\r\n\t\t\t\t\t\t\t\t\t\tthis.downLoadMp3(uni._audio.src,\"$voice-pause\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tendRecord() {\r\n\t\t\t\tthis.dhShow = false\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tplus.speech.stopRecognize();\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t// 开始 语音播报>>语音输入 流程\r\n\t\t\tstepFunc(index) {\r\n\t\t\t\tthis.state=\"\"\r\n\t\t\t\tthis.isAgain=false\r\n\t\t\t\tthis.dhShow = false\r\n\t\t\t\tlet nextIndex = false\r\n\t\t\t\tthis.errTimes=uni.getStorageSync(\"speech_errTimes\")\r\n\t\t\t\tif (this.step[index].isNext) { // 是否进行下一步\r\n\t\t\t\t\tif (index != this.step.length - 1) {\r\n\t\t\t\t\t\tnextIndex = index + 1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.nextIndex = nextIndex\r\n\t\t\t\tthis.index = index\r\n\t\t\t\tthis.$emit(\"doing\", this.step[index].fixedId, index)\r\n\t\t\t\tlet xx=\"$voice-\"+this.step[this.index].fixedId\r\n\t\t\t\tif(uni.getStorageSync(xx)){//有本地音频\r\n\t\t\t\t\tlet audioLocal=uni.createInnerAudioContext();\r\n\t\t\t\t\taudioLocal.src = uni.getStorageSync(xx)\r\n\t\t\t\t\taudioLocal.play();\r\n\t\t\t\t\taudioLocal.onEnded(() => {\r\n\t\t\t\t\t\tthis.state=\"order\"\r\n\t\t\t\t\t\tthis.startRecord()\r\n\t\t\t\t\t\tif (this.step[this.index].isSearchCon) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else { // 不需要搜索内容\r\n\t\t\t\t\t\t\tif (this.step[this.index].searchFunc) { // 需要搜索\r\n\t\t\t\t\t\t\t\tthis.$parent[this.step[this.index].searchFunc]()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\taudioLocal.destroy();\r\n\t\t\t\t\t\taudioLocal = null\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$voice({\r\n\t\t\t\t\t\tvoiceSet: {\r\n\t\t\t\t\t\t\ttex: this.step[index].tips,\r\n\t\t\t\t\t\t\tspd: uni.getStorageSync(\"voice_yusu\"),\r\n\t\t\t\t\t\t\tpit: uni.getStorageSync(\"voice_yindiao\"),\r\n\t\t\t\t\t\t\tvol: uni.getStorageSync(\"voice_yinliang\"),\r\n\t\t\t\t\t\t\tper: uni.getStorageSync(\"voice_per\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\taudioCallback: {\r\n\t\t\t\t\t\t\tonPlay:()=>{\r\n\t\t\t\t\t\t\t\tthis.downLoadMp3(uni._audio.src,xx)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonEnded: () => {\r\n\t\t\t\t\t\t\t\tthis.state=\"order\"\r\n\t\t\t\t\t\t\t\tthis.startRecord()\r\n\t\t\t\t\t\t\t\tif (this.step[this.index].isSearchCon) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t} else { // 不需要搜索内容\r\n\t\t\t\t\t\t\t\t\tif (this.step[this.index].searchFunc) { // 需要搜索\r\n\t\t\t\t\t\t\t\t\t\tthis.$parent[this.step[this.index].searchFunc]()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 搜索的结果\r\n\t\t\tchooseValue(nextIndex, index) {\r\n\t\t\t\tlet list_id = \"\"\r\n\t\t\t\tlet list_mc = \"\"\r\n\t\t\t\tif (this.step[this.index].fixedId == \"depart\") { // 部门语音输入\r\n\t\t\t\t\tlist_id = \"DepartBH\"\r\n\t\t\t\t\tlist_mc = \"DepartMC\"\r\n\t\t\t\t} else if (this.step[this.index].fixedId == \"fendian\") {\r\n\t\t\t\t\tlist_id = \"fdbh\"\r\n\t\t\t\t\tlist_mc = \"fdmc\"\r\n\t\t\t\t} else if (this.step[this.index].fixedId == \"business\") {\r\n\t\t\t\t\tlist_id = \"sjbh\"\r\n\t\t\t\t\tlist_mc = \"sjmc\"\r\n\t\t\t\t} else if (this.step[this.index].fixedId == \"storage\") {\r\n\t\t\t\t\tlist_id = \"ckbmid\"\r\n\t\t\t\t\tlist_mc = \"ckmc\"\r\n\t\t\t\t} else if (this.step[this.index].fixedId == \"lx\") {\r\n\t\t\t\t\tlist_id = \"sjcxlxid\"\r\n\t\t\t\t\tlist_mc = \"lxmc\"\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"this.list this.list\",this.list)\r\n\t\t\t\tif (this.list.length > 1) {\r\n\t\t\t\t\tthis.state=\"\"\r\n\t\t\t\t\tif(uni.getStorageSync(\"$voice-again\")){//有本地音频\r\n\t\t\t\t\t\tlet audioLocal=uni.createInnerAudioContext();\r\n\t\t\t\t\t\taudioLocal.src = uni.getStorageSync(\"$voice-again\")\r\n\t\t\t\t\t\taudioLocal.play();\r\n\t\t\t\t\t\taudioLocal.onEnded(() => {\r\n\t\t\t\t\t\t\tthis.state=\"order\"\r\n\t\t\t\t\t\t\tthis.isAgain=true\r\n\t\t\t\t\t\t\tthis.errTimes=uni.getStorageSync(\"speech_errTimes\")\r\n\t\t\t\t\t\t\tthis.startRecord()\r\n\t\t\t\t\t\t\taudioLocal.destroy();\r\n\t\t\t\t\t\t\taudioLocal = null\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.$voice({\r\n\t\t\t\t\t\t\tvoiceSet: {\r\n\t\t\t\t\t\t\t\ttex: \"请再次选择\",\r\n\t\t\t\t\t\t\t\tspd: uni.getStorageSync(\"voice_yusu\"),\r\n\t\t\t\t\t\t\t\tpit: uni.getStorageSync(\"voice_yindiao\"),\r\n\t\t\t\t\t\t\t\tvol: uni.getStorageSync(\"voice_yinliang\"),\r\n\t\t\t\t\t\t\t\tper: uni.getStorageSync(\"voice_per\")\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\taudioCallback: {\r\n\t\t\t\t\t\t\t\tonPlay:()=>{\r\n\t\t\t\t\t\t\t\t\tthis.downLoadMp3(uni._audio.src,\"$voice-again\")\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tonEnded: () => {\r\n\t\t\t\t\t\t\t\t\tthis.state=\"order\"\r\n\t\t\t\t\t\t\t\t\tthis.isAgain=true\r\n\t\t\t\t\t\t\t\t\tthis.errTimes=uni.getStorageSync(\"speech_errTimes\")\r\n\t\t\t\t\t\t\t\t\tthis.startRecord()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.list.length == 1) {\r\n\t\t\t\t\tlet str = \"\"\r\n\t\t\t\t\tif (this.step[this.index].fixedId == \"shoping\"){//搜索商品时特殊处理\r\n\t\t\t\t\t\tstr=this.list[0]\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tstr = `${this.list[0][list_id]}-${this.list[0][list_mc]}`\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$emit(\"changeParentValue\", {\r\n\t\t\t\t\t\t\"fixedId\": this.step[this.index].fixedId,\r\n\t\t\t\t\t\t\"id\": this.step[this.index].id,\r\n\t\t\t\t\t\t\"val\": str,\r\n\t\t\t\t\t\t\"next\": this.nextIndex,\r\n\t\t\t\t\t\t\"nextFunc\": this.step[this.index].nextFunc,\r\n\t\t\t\t\t\t\"searchFunc\": this.step[this.index].searchFunc,\r\n\t\t\t\t\t\t\"isSearchCon\": this.step[this.index].isSearchCon,\r\n\t\t\t\t\t\t\"completeFunc\": this.step[this.index].completeFunc\r\n\t\t\t\t\t})\r\n\t\t\t\t} else { //没有搜索到内容\r\n\t\t\t\t\tthis.state=\"\"\r\n\t\t\t\t\tif(uni.getStorageSync(\"$voice-noCon\")){//有本地音频\r\n\t\t\t\t\t\tlet audioLocal=uni.createInnerAudioContext();\r\n\t\t\t\t\t\taudioLocal.src = uni.getStorageSync(\"$voice-noCon\")\r\n\t\t\t\t\t\taudioLocal.play();\r\n\t\t\t\t\t\taudioLocal.onEnded(() => {\r\n\t\t\t\t\t\t\tthis.state=\"order\"\r\n\t\t\t\t\t\t\tthis.startRecord()\r\n\t\t\t\t\t\t\taudioLocal.destroy();\r\n\t\t\t\t\t\t\taudioLocal = null\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.$voice({\r\n\t\t\t\t\t\t\tvoiceSet: {\r\n\t\t\t\t\t\t\t\ttex: \"没有匹配到内容\",\r\n\t\t\t\t\t\t\t\tspd: uni.getStorageSync(\"voice_yusu\"),\r\n\t\t\t\t\t\t\t\tpit: uni.getStorageSync(\"voice_yindiao\"),\r\n\t\t\t\t\t\t\t\tvol: uni.getStorageSync(\"voice_yinliang\"),\r\n\t\t\t\t\t\t\t\tper: uni.getStorageSync(\"voice_per\")\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\taudioCallback: {\r\n\t\t\t\t\t\t\t\tonPlay:()=>{\r\n\t\t\t\t\t\t\t\t\tthis.downLoadMp3(uni._audio.src,\"$voice-noCon\")\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tonEnded: () => {\r\n\t\t\t\t\t\t\t\t\tthis.state=\"order\"\r\n\t\t\t\t\t\t\t\t\tthis.startRecord()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 截取数字(包括小数)\r\n\t\t\tcutNum(str){\r\n\t\t\t\tlet arrUnicode = [\"\\u70b9\",\"\\u96f6\",\"\\u4e00\", \"\\u4e8c\", \"\\u4e09\", \"\\u56db\", \"\\u4e94\", \"\\u516d\", \"\\u4e03\", \"\\u516b\",\r\n\t\t\t\t\t\"\\u4e5d\", \"\\u5341\", \"\\u767e\", \"\\u5343\",\"\\u4e07\",\"\\u4ebf\"\r\n\t\t\t\t]\r\n\t\t\t\t// let arrUnicode = [\"点\",\"零\",\"一\",\"二\",\"三\",\"四\",\"五\",\"六\",\"七\",\"八\",\"九\",\"十\",\"百\",\"千\",\"万\",\"亿\"]\r\n\t\t\t\tlet results=\"\"\r\n\t\t\t\tstr.split(\"\").forEach((v,i,arr)=>{\r\n\t\t\t\t\tarrUnicode.forEach((item,j,arrs)=>{\r\n\t\t\t\t\t\tif(item==v){\r\n\t\t\t\t\t\t\tresults+=v\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\treturn results\r\n\t\t\t},\r\n\t\t\t// 大写 数字变小写\r\n\t\t\ttoUpperNum(shuzi) {\r\n\t\t\t\tlet chnStr,xiaoshu\r\n\t\t\t\tif(shuzi.indexOf(\"点\")>-1){\r\n\t\t\t\t\tchnStr=shuzi.split(\"点\")[0]\r\n\t\t\t\t\txiaoshu=shuzi.split(\"点\")[1]\r\n\t\t\t\t}else{\r\n\t\t\t\t\tchnStr=shuzi\r\n\t\t\t\t}\r\n\t\t\t\tvar chnNumChar = {\r\n\t\t\t\t\t点: \".\",\r\n\t\t\t\t\t零: 0,\r\n\t\t\t\t\t一: 1,\r\n\t\t\t\t\t二: 2,\r\n\t\t\t\t\t三: 3,\r\n\t\t\t\t\t四: 4,\r\n\t\t\t\t\t五: 5,\r\n\t\t\t\t\t六: 6,\r\n\t\t\t\t\t七: 7,\r\n\t\t\t\t\t八: 8,\r\n\t\t\t\t\t九: 9\r\n\t\t\t\t};\r\n\t\t\t\tvar chnNameValue = {\r\n\t\t\t\t\t十: {\r\n\t\t\t\t\t\tvalue: 10,\r\n\t\t\t\t\t\tsecUnit: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t百: {\r\n\t\t\t\t\t\tvalue: 100,\r\n\t\t\t\t\t\tsecUnit: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t千: {\r\n\t\t\t\t\t\tvalue: 1000,\r\n\t\t\t\t\t\tsecUnit: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t万: {\r\n\t\t\t\t\t\tvalue: 10000,\r\n\t\t\t\t\t\tsecUnit: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t亿: {\r\n\t\t\t\t\t\tvalue: 100000000,\r\n\t\t\t\t\t\tsecUnit: true\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tvar expNumChar = {\r\n\t\t\t\t\t十: 10,\r\n\t\t\t\t\t十一: 11,\r\n\t\t\t\t\t十二: 12,\r\n\t\t\t\t\t十三: 13,\r\n\t\t\t\t\t十四: 14,\r\n\t\t\t\t\t十五: 15,\r\n\t\t\t\t\t十六: 16,\r\n\t\t\t\t\t十七: 17,\r\n\t\t\t\t\t十八: 18,\r\n\t\t\t\t\t十九: 19\r\n\t\t\t\t};\r\n\t\t\t\tif (expNumChar[chnStr]) {\r\n\t\t\t\t\treturn expNumChar[chnStr];\r\n\t\t\t\t}\r\n\t\t\t\tvar rtn = 0;\r\n\t\t\t\tvar section = 0;\r\n\t\t\t\tvar number = 0;\r\n\t\t\t\tvar secUnit = false;\r\n\t\t\t\tvar str = chnStr.split('');\r\n\t\t\t\tfor (var i = 0; i < str.length; i++) {\r\n\t\t\t\t\tvar num = chnNumChar[str[i]];\r\n\t\t\t\t\tif (typeof num !== 'undefined') {\r\n\t\t\t\t\t\tnumber = num;\r\n\t\t\t\t\t\tif (i === str.length - 1) {\r\n\t\t\t\t\t\t\tsection += number;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar cunit = chnNameValue[str[i]];\r\n\t\t\t\t\t\tif (typeof cunit == 'undefined') {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar unit = chnNameValue[str[i]].value;\r\n\t\t\t\t\t\tsecUnit = chnNameValue[str[i]].secUnit;\r\n\t\t\t\t\t\tif (secUnit) {\r\n\t\t\t\t\t\t\tsection = (section + number) * unit;\r\n\t\t\t\t\t\t\trtn += section;\r\n\t\t\t\t\t\t\tsection = 0;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsection += (number * unit);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnumber = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(shuzi.indexOf(\"点\")>-1){\r\n\t\t\t\t\tvar xiaoStr =  xiaoshu.split('');\r\n\t\t\t\t\tvar xiaoTotal=\"\"\r\n\t\t\t\t\tfor(var k in xiaoStr){\r\n\t\t\t\t\t\tfor(var j in chnNumChar){\r\n\t\t\t\t\t\t\tif(j==xiaoStr[k]){\r\n\t\t\t\t\t\t\t\txiaoTotal+=chnNumChar[j].toString()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn rtn + section+\".\"+xiaoTotal;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn rtn + section;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdownLoadMp3(url,setname){\r\n\t\t\t\tuni.setStorageSync(setname,\"\")\r\n\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\turl:url,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tuni.saveFile({\r\n\t\t\t\t\t\t\ttempFilePath:res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess:function(resave){\r\n\t\t\t\t\t\t\t\tlet savedFilePath=resave.savedFilePath\r\n\t\t\t\t\t\t\t\tuni.setStorageSync(setname,savedFilePath)\r\n\t\t\t\t\t\t\t\t// console.log(\"uni.getStorageSync setname:\"+setname,\"！！！path:\"+savedFilePath)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail:function(errs){}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tstep: function(newv, oldv) {\r\n\t\t\t\tif (newv.length != 0) {\r\n\t\t\t\t\tthis.stepFunc(0)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsearchCode: function(newv, oldv) {\r\n\t\t\t\tif (this.step.length != 0) {\r\n\t\t\t\t\tif (newv == 0) { //已经查询到搜索内容\r\n\t\t\t\t\t\tthis.chooseValue(this.nextIndex, this.index)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstate: function(newv, oldv) {\r\n\t\t\t\tif (newv == \"order\") {\r\n\t\t\t\t\tthis.xtts=\"小麦在听，请根据提示对话\"\r\n\t\t\t\t\tthis.buttTs=\"点击下方按键，停止语音对话\"\r\n\t\t\t\t}else if (newv == \"pause\") {\r\n\t\t\t\t\tthis.xtts=\"已暂停，再继续语音对话吧\"\r\n\t\t\t\t\tthis.buttTs=\"点击下方按键，开始语音对话\"\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.xtts=\"小麦在听，请根据提示对话\"\r\n\t\t\t\t\tthis.buttTs=\"\"\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.box-compents{\r\n\t\twidth: 100%;\r\n\t}\r\n\t\r\n\t.box-voice{\r\n\t\twidth: 100%;\r\n\t\theight: 200px;\r\n\t\tpadding: 10px;\r\n\t\t// background-color: #DFEFFA;\r\n\t\tbackground-color: rgba(223,239,250,.75);\r\n\t\tborder: 1px solid #b3b3b3;\r\n\t\tborder-radius: 10px;\r\n\t\tbox-sizing: border-box;\r\n\t\tposition: relative;\r\n\t\t\r\n\t\t.xtts{\r\n\t\t\tcolor: #4A98CF;\r\n\t\t\tfont-size: 18px;\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-top: 20px;\r\n\t\t}\r\n\t\t\r\n\t\t.butt-ts{\r\n\t\t\tcolor: #9DA2A6;\r\n\t\t\tfont-size: 14px;\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-top: 10px;\r\n\t\t}\r\n\t\t\r\n\t\t.last-list{\r\n\t\t\twidth: 100%;\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 0;\r\n\t\t\tbottom: 10px;\r\n\t\t\t\r\n\t\t\t.user-zi{\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tmargin-bottom: 6px;\r\n\t\t\t}\r\n\t\t\t.iconView {\r\n\t\t\t\twidth: 52px;\r\n\t\t\t\theight: 52px;\r\n\t\t\t\tmargin: 0 auto;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tborder-radius: 50%;\r\n\t\t\t\tbackground-image: linear-gradient(to right, #48aeed, #3489c7);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.exit-zi{\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 10px;\r\n\t\t\tbottom: 10px;\r\n\t\t\tcolor: #EA818A;\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t//.............................................................................................\r\n\t* {\r\n\t\tborder: 0;\r\n\t\tbox-sizing: border-box;\r\n\t\tmargin: 0;\r\n\t\tpadding: 0;\r\n\t\t--c1: #fff;\r\n\t\t--c2: #fff;\r\n\t\t--c3: #fff;\r\n\t\t--c4: #fff;\r\n\t\tfont-size: calc(16px + (24 - 16) * (100vw - 320px) / (1280 - 320));\r\n\t}\r\n\t\r\n\t.pl4-dh {\r\n\t\t.pl4__a,\r\n\t\t.pl4__b,\r\n\t\t.pl4__c,\r\n\t\t.pl4__d {\r\n\t\t\tanimation: bounce4 2s linear infinite;\r\n\t\t\ttransform-origin: 50% 100%;\r\n\t\t}\r\n\t}\r\n\t\r\n\t.pl4,.pl4-dh {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: flex-end;\r\n\t\twidth: 62%;\r\n\t\tmargin: auto;\r\n\t\theight: 22px;\r\n\t\t\r\n\t\t.pl4__a,\r\n\t\t.pl4__b,\r\n\t\t.pl4__c,\r\n\t\t.pl4__d {\r\n\t\t\twidth: 4px;\r\n\t\t\theight: 22px;\r\n\t\t\tborder-radius: 5px;\r\n\t\t}\r\n\t\t\r\n\t\t.pl4__a {\r\n\t\t\tbackground: var(--c1);\r\n\t\t}\r\n\t\t\r\n\t\t.pl4__b {\r\n\t\t\tbackground: var(--c2);\r\n\t\t\tanimation-delay: 0.1s;\r\n\t\t}\r\n\t\t\r\n\t\t.pl4__c {\r\n\t\t\tbackground: var(--c3);\r\n\t\t\tanimation-delay: 0.2s;\r\n\t\t}\r\n\t\t\r\n\t\t.pl4__d {\r\n\t\t\tbackground: var(--c4);\r\n\t\t\tanimation-delay: 0.3s;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/* Animations */\r\n\t@keyframes bounce4 {\r\n\t\tfrom,\r\n\t\t20%,\r\n\t\t40%,\r\n\t\t60%,\r\n\t\t90%,\r\n\t\tto {\r\n\t\t\ttransform: scaleY(1);\r\n\t\t\tanimation-timing-function: ease-out;\r\n\t\t}\r\n\t\r\n\t\t10% {\r\n\t\t\ttransform: scaleY(0.125);\r\n\t\t\tanimation-timing-function: ease-in;\r\n\t\t}\r\n\t\r\n\t\t30% {\r\n\t\t\ttransform: scaleY(0.25);\r\n\t\t\tanimation-timing-function: ease-in;\r\n\t\t}\r\n\t\r\n\t\t50% {\r\n\t\t\ttransform: scaleY(0.5);\r\n\t\t\tanimation-timing-function: ease-in;\r\n\t\t}\r\n\t\r\n\t\t70% {\r\n\t\t\ttransform: scaleY(0.75);\r\n\t\t\tanimation-timing-function: ease-in;\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goodsVoice.vue?vue&type=style&index=0&id=2abb6e44&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goodsVoice.vue?vue&type=style&index=0&id=2abb6e44&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1677116515648\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}